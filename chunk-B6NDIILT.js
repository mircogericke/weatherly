import{a as Mn,b as An,c as Sn,d as En,e as In,f as oe,i as Nn}from"./chunk-TDC6SCGB.js";import{B as kn,E as Ut,K as vn,L as wn,P as Cn,p as _n}from"./chunk-EVLCYNPR.js";import"./chunk-C7C3WC5R.js";import{$a as jr,Ab as an,Bb as cn,Db as je,Ea as Zr,Fb as sn,Gb as ln,Ha as Jr,Hb as un,Jb as Bt,Kb as Xt,Lb as Wt,Nb as fn,Ob as mn,Pb as hn,Qb as H,Rb as dn,Ub as Ht,Va as L,Vb as Yt,W as Wr,Wb as Qt,Xb as pn,Y as Hr,_ as Yr,a as Br,ac as xn,b as Xr,ba as P,dc as Z,ec as gn,fb as _e,fc as R,gb as en,ia as Qr,ic as bn,ja as be,jb as tn,jc as yn,ka as ye,kb as rn,la as Ke,ma as Ur,pa as Gr,pb as Se,qb as ne,sa as Ft,sb as Vt,ta as Kr,tb as nn,ub as on,va as re,wa as Ze,xb as T,yb as z,za as Je,zb as W}from"./chunk-M22MQGHZ.js";function Ki(e,t){return oe.PlainDate.compare(e,t.dates.end.with({year:e.year}))<=0}function Tn(e,t){let r=e[0].dates.start.year;return t.map(n=>{let o=n.map(l=>Zi(e,l)),i={year:o[0].time[0].year,hour:[]},a=0,c=0;for(a=0;a<e.length;a++){let l=o[a],s=l.time,f=s[0].year;for(c;c<s.length&&Ki(s[c],e[a]);c++){let u=s[c].year-f;i.hour.push({cloudCover:l.cloudCover[c],isDay:l.isDay[c],location:l.location[c],precipitation:l.precipitation[c],sunshineDuration:l.sunshineDuration[c],temperature:l.temperature[c],time:s[c].with({year:r+u})})}}return i})}function Zi(e,t){let r=t.hourly,n=e[t.location_id??0].location;return{location:r.time.map(()=>n),time:r.time.map(o=>oe.PlainDateTime.from(o)),isDay:r.is_day.map(o=>!!o),cloudCover:r.cloud_cover,temperature:r.temperature_2m,precipitation:r.precipitation,sunshineDuration:r.sunshine_duration}}function ie(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Gt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function et(e){let t,r,n;e.length!==2?(t=ie,r=(c,l)=>ie(e(c),l),n=(c,l)=>e(c)-l):(t=e===ie||e===Gt?e:Ji,r=e,n=e);function o(c,l,s=0,f=c.length){if(s<f){if(t(l,l)!==0)return f;do{let u=s+f>>>1;r(c[u],l)<0?s=u+1:f=u}while(s<f)}return s}function i(c,l,s=0,f=c.length){if(s<f){if(t(l,l)!==0)return f;do{let u=s+f>>>1;r(c[u],l)<=0?s=u+1:f=u}while(s<f)}return s}function a(c,l,s=0,f=c.length){let u=o(c,l,s,f-1);return u>s&&n(c[u-1],l)>-n(c[u],l)?u-1:u}return{left:o,center:a,right:i}}function Ji(){return 0}function Kt(e){return e===null?NaN:+e}var Dn=et(ie),zn=Dn.right,ji=Dn.left,ea=et(Kt).center,Zt=zn;var ta=Math.sqrt(50),ra=Math.sqrt(10),na=Math.sqrt(2);function tt(e,t,r){let n=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(n)),i=n/Math.pow(10,o),a=i>=ta?10:i>=ra?5:i>=na?2:1,c,l,s;return o<0?(s=Math.pow(10,-o)/a,c=Math.round(e*s),l=Math.round(t*s),c/s<e&&++c,l/s>t&&--l,s=-s):(s=Math.pow(10,o)*a,c=Math.round(e/s),l=Math.round(t/s),c*s<e&&++c,l*s>t&&--l),l<c&&.5<=r&&r<2?tt(e,t,r*2):[c,l,s]}function rt(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let n=t<e,[o,i,a]=n?tt(t,e,r):tt(e,t,r);if(!(i>=o))return[];let c=i-o+1,l=new Array(c);if(n)if(a<0)for(let s=0;s<c;++s)l[s]=(i-s)/-a;else for(let s=0;s<c;++s)l[s]=(i-s)*a;else if(a<0)for(let s=0;s<c;++s)l[s]=(o+s)/-a;else for(let s=0;s<c;++s)l[s]=(o+s)*a;return l}function Ee(e,t,r){return t=+t,e=+e,r=+r,tt(e,t,r)[2]}function Jt(e,t,r){t=+t,e=+e,r=+r;let n=t<e,o=n?Ee(t,e,r):Ee(e,t,r);return(n?-1:1)*(o<0?1/-o:o)}function On(e){return e}var jt=1,er=2,tr=3,Ie=4,Rn=1e-6;function oa(e){return"translate("+e+",0)"}function ia(e){return"translate(0,"+e+")"}function aa(e){return t=>+e(t)}function ca(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function sa(){return!this.__axis}function Pn(e,t){var r=[],n=null,o=null,i=6,a=6,c=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=e===jt||e===Ie?-1:1,f=e===Ie||e===er?"x":"y",u=e===jt||e===tr?oa:ia;function m(h){var d=n??(t.ticks?t.ticks.apply(t,r):t.domain()),g=o??(t.tickFormat?t.tickFormat.apply(t,r):On),p=Math.max(i,0)+c,b=t.range(),y=+b[0]+l,_=+b[b.length-1]+l,M=(t.bandwidth?ca:aa)(t.copy(),l),k=h.selection?h.selection():h,G=k.selectAll(".domain").data([null]),$=k.selectAll(".tick").data(d,t).order(),pe=$.exit(),xe=$.enter().append("g").attr("class","tick"),K=$.select("line"),x=$.select("text");G=G.merge(G.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(xe),K=K.merge(xe.append("line").attr("stroke","currentColor").attr(f+"2",s*i)),x=x.merge(xe.append("text").attr("fill","currentColor").attr(f,s*p).attr("dy",e===jt?"0em":e===tr?"0.71em":"0.32em")),h!==k&&(G=G.transition(h),$=$.transition(h),K=K.transition(h),x=x.transition(h),pe=pe.transition(h).attr("opacity",Rn).attr("transform",function(I){return isFinite(I=M(I))?u(I+l):this.getAttribute("transform")}),xe.attr("opacity",Rn).attr("transform",function(I){var A=this.parentNode.__axis;return u((A&&isFinite(A=A(I))?A:M(I))+l)})),pe.remove(),G.attr("d",e===Ie||e===er?a?"M"+s*a+","+y+"H"+l+"V"+_+"H"+s*a:"M"+l+","+y+"V"+_:a?"M"+y+","+s*a+"V"+l+"H"+_+"V"+s*a:"M"+y+","+l+"H"+_),$.attr("opacity",1).attr("transform",function(I){return u(M(I)+l)}),K.attr(f+"2",s*i),x.attr(f,s*p).text(g),k.filter(sa).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===er?"start":e===Ie?"end":"middle"),k.each(function(){this.__axis=M})}return m.scale=function(h){return arguments.length?(t=h,m):t},m.ticks=function(){return r=Array.from(arguments),m},m.tickArguments=function(h){return arguments.length?(r=h==null?[]:Array.from(h),m):r.slice()},m.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),m):n&&n.slice()},m.tickFormat=function(h){return arguments.length?(o=h,m):o},m.tickSize=function(h){return arguments.length?(i=a=+h,m):i},m.tickSizeInner=function(h){return arguments.length?(i=+h,m):i},m.tickSizeOuter=function(h){return arguments.length?(a=+h,m):a},m.tickPadding=function(h){return arguments.length?(c=+h,m):c},m.offset=function(h){return arguments.length?(l=+h,m):l},m}function rr(e){return Pn(tr,e)}function nr(e){return Pn(Ie,e)}var la={value:()=>{}};function Ln(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new nt(r)}function nt(e){this._=e}function ua(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}nt.prototype=Ln.prototype={constructor:nt,on:function(e,t){var r=this._,n=ua(e+"",r),o,i=-1,a=n.length;if(arguments.length<2){for(;++i<a;)if((o=(e=n[i]).type)&&(o=fa(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=n[i]).type)r[o]=$n(r[o],e.name,t);else if(t==null)for(o in r)r[o]=$n(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new nt(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,i=n.length;o<i;++o)n[o].value.apply(t,r)}};function fa(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function $n(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=la,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var or=Ln;var ot="http://www.w3.org/1999/xhtml",ir={svg:"http://www.w3.org/2000/svg",xhtml:ot,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Y(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),ir.hasOwnProperty(t)?{space:ir[t],local:e}:e}function ma(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ot&&t.documentElement.namespaceURI===ot?t.createElement(e):t.createElementNS(r,e)}}function ha(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function it(e){var t=Y(e);return(t.local?ha:ma)(t)}function da(){}function ae(e){return e==null?da:function(){return this.querySelector(e)}}function qn(e){typeof e!="function"&&(e=ae(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=new Array(a),l,s,f=0;f<a;++f)(l=i[f])&&(s=e.call(l,l.__data__,f,i))&&("__data__"in l&&(s.__data__=l.__data__),c[f]=s);return new v(n,this._parents)}function ar(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pa(){return[]}function Ne(e){return e==null?pa:function(){return this.querySelectorAll(e)}}function xa(e){return function(){return ar(e.apply(this,arguments))}}function Fn(e){typeof e=="function"?e=xa(e):e=Ne(e);for(var t=this._groups,r=t.length,n=[],o=[],i=0;i<r;++i)for(var a=t[i],c=a.length,l,s=0;s<c;++s)(l=a[s])&&(n.push(e.call(l,l.__data__,s,a)),o.push(l));return new v(n,o)}function Te(e){return function(){return this.matches(e)}}function at(e){return function(t){return t.matches(e)}}var ga=Array.prototype.find;function ba(e){return function(){return ga.call(this.children,e)}}function ya(){return this.firstElementChild}function Vn(e){return this.select(e==null?ya:ba(typeof e=="function"?e:at(e)))}var _a=Array.prototype.filter;function ka(){return Array.from(this.children)}function va(e){return function(){return _a.call(this.children,e)}}function Bn(e){return this.selectAll(e==null?ka:va(typeof e=="function"?e:at(e)))}function Xn(e){typeof e!="function"&&(e=Te(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=[],l,s=0;s<a;++s)(l=i[s])&&e.call(l,l.__data__,s,i)&&c.push(l);return new v(n,this._parents)}function ct(e){return new Array(e.length)}function Wn(){return new v(this._enter||this._groups.map(ct),this._parents)}function De(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}De.prototype={constructor:De,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hn(e){return function(){return e}}function wa(e,t,r,n,o,i){for(var a=0,c,l=t.length,s=i.length;a<s;++a)(c=t[a])?(c.__data__=i[a],n[a]=c):r[a]=new De(e,i[a]);for(;a<l;++a)(c=t[a])&&(o[a]=c)}function Ca(e,t,r,n,o,i,a){var c,l,s=new Map,f=t.length,u=i.length,m=new Array(f),h;for(c=0;c<f;++c)(l=t[c])&&(m[c]=h=a.call(l,l.__data__,c,t)+"",s.has(h)?o[c]=l:s.set(h,l));for(c=0;c<u;++c)h=a.call(e,i[c],c,i)+"",(l=s.get(h))?(n[c]=l,l.__data__=i[c],s.delete(h)):r[c]=new De(e,i[c]);for(c=0;c<f;++c)(l=t[c])&&s.get(m[c])===l&&(o[c]=l)}function Ma(e){return e.__data__}function Yn(e,t){if(!arguments.length)return Array.from(this,Ma);var r=t?Ca:wa,n=this._parents,o=this._groups;typeof e!="function"&&(e=Hn(e));for(var i=o.length,a=new Array(i),c=new Array(i),l=new Array(i),s=0;s<i;++s){var f=n[s],u=o[s],m=u.length,h=Aa(e.call(f,f&&f.__data__,s,n)),d=h.length,g=c[s]=new Array(d),p=a[s]=new Array(d),b=l[s]=new Array(m);r(f,u,g,p,b,h,t);for(var y=0,_=0,M,k;y<d;++y)if(M=g[y]){for(y>=_&&(_=y+1);!(k=p[_])&&++_<d;);M._next=k||null}}return a=new v(a,n),a._enter=c,a._exit=l,a}function Aa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qn(){return new v(this._exit||this._groups.map(ct),this._parents)}function Un(e,t,r){var n=this.enter(),o=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function Gn(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,i=n.length,a=Math.min(o,i),c=new Array(o),l=0;l<a;++l)for(var s=r[l],f=n[l],u=s.length,m=c[l]=new Array(u),h,d=0;d<u;++d)(h=s[d]||f[d])&&(m[d]=h);for(;l<o;++l)c[l]=r[l];return new v(c,this._parents)}function Kn(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function Zn(e){e||(e=Sa);function t(u,m){return u&&m?e(u.__data__,m.__data__):!u-!m}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],c=a.length,l=o[i]=new Array(c),s,f=0;f<c;++f)(s=a[f])&&(l[f]=s);l.sort(t)}return new v(o,this._parents).order()}function Sa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jn(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jn(){return Array.from(this)}function eo(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}function to(){let e=0;for(let t of this)++e;return e}function ro(){return!this.node()}function no(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,a=o.length,c;i<a;++i)(c=o[i])&&e.call(c,c.__data__,i,o);return this}function Ea(e){return function(){this.removeAttribute(e)}}function Ia(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Na(e,t){return function(){this.setAttribute(e,t)}}function Ta(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Da(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function za(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function oo(e,t){var r=Y(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Ia:Ea:typeof t=="function"?r.local?za:Da:r.local?Ta:Na)(r,t))}function st(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Oa(e){return function(){this.style.removeProperty(e)}}function Ra(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Pa(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function io(e,t,r){return arguments.length>1?this.each((t==null?Oa:typeof t=="function"?Pa:Ra)(e,t,r??"")):J(this.node(),e)}function J(e,t){return e.style.getPropertyValue(t)||st(e).getComputedStyle(e,null).getPropertyValue(t)}function $a(e){return function(){delete this[e]}}function La(e,t){return function(){this[e]=t}}function qa(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function ao(e,t){return arguments.length>1?this.each((t==null?$a:typeof t=="function"?qa:La)(e,t)):this.node()[e]}function co(e){return e.trim().split(/^|\s+/)}function cr(e){return e.classList||new so(e)}function so(e){this._node=e,this._names=co(e.getAttribute("class")||"")}so.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lo(e,t){for(var r=cr(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function uo(e,t){for(var r=cr(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function Fa(e){return function(){lo(this,e)}}function Va(e){return function(){uo(this,e)}}function Ba(e,t){return function(){(t.apply(this,arguments)?lo:uo)(this,e)}}function fo(e,t){var r=co(e+"");if(arguments.length<2){for(var n=cr(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?Ba:t?Fa:Va)(r,t))}function Xa(){this.textContent=""}function Wa(e){return function(){this.textContent=e}}function Ha(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mo(e){return arguments.length?this.each(e==null?Xa:(typeof e=="function"?Ha:Wa)(e)):this.node().textContent}function Ya(){this.innerHTML=""}function Qa(e){return function(){this.innerHTML=e}}function Ua(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ho(e){return arguments.length?this.each(e==null?Ya:(typeof e=="function"?Ua:Qa)(e)):this.node().innerHTML}function Ga(){this.nextSibling&&this.parentNode.appendChild(this)}function po(){return this.each(Ga)}function Ka(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xo(){return this.each(Ka)}function go(e){var t=typeof e=="function"?e:it(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Za(){return null}function bo(e,t){var r=typeof e=="function"?e:it(e),n=t==null?Za:typeof t=="function"?t:ae(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Ja(){var e=this.parentNode;e&&e.removeChild(this)}function yo(){return this.each(Ja)}function ja(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ec(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _o(e){return this.select(e?ec:ja)}function ko(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tc(e){return function(t){e.call(this,t,this.__data__)}}function rc(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function nc(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,i;r<o;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function oc(e,t,r){return function(){var n=this.__on,o,i=tc(t);if(n){for(var a=0,c=n.length;a<c;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=t;return}}this.addEventListener(e.type,i,r),o={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(o):this.__on=[o]}}function vo(e,t,r){var n=rc(e+""),o,i=n.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,s=c.length,f;l<s;++l)for(o=0,f=c[l];o<i;++o)if((a=n[o]).type===f.type&&a.name===f.name)return f.value}return}for(c=t?oc:nc,o=0;o<i;++o)this.each(c(n[o],t,r));return this}function wo(e,t,r){var n=st(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function ic(e,t){return function(){return wo(this,e,t)}}function ac(e,t){return function(){return wo(this,e,t.apply(this,arguments))}}function Co(e,t){return this.each((typeof t=="function"?ac:ic)(e,t))}function*Mo(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var sr=[null];function v(e,t){this._groups=e,this._parents=t}function Ao(){return new v([[document.documentElement]],sr)}function cc(){return this}v.prototype=Ao.prototype={constructor:v,select:qn,selectAll:Fn,selectChild:Vn,selectChildren:Bn,filter:Xn,data:Yn,enter:Wn,exit:Qn,join:Un,merge:Gn,selection:cc,order:Kn,sort:Zn,call:Jn,nodes:jn,node:eo,size:to,empty:ro,each:no,attr:oo,style:io,property:ao,classed:fo,text:mo,html:ho,raise:po,lower:xo,append:go,insert:bo,remove:yo,clone:_o,datum:ko,on:vo,dispatch:Co,[Symbol.iterator]:Mo};var Q=Ao;function lr(e){return typeof e=="string"?new v([[document.querySelector(e)]],[document.documentElement]):new v([[e]],sr)}function lt(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ur(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Re(){}var ze=.7,mt=1/ze,ke="\\s*([+-]?\\d+)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",V="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sc=/^#([0-9a-f]{3,8})$/,lc=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),uc=new RegExp(`^rgb\\(${V},${V},${V}\\)$`),fc=new RegExp(`^rgba\\(${ke},${ke},${ke},${Oe}\\)$`),mc=new RegExp(`^rgba\\(${V},${V},${V},${Oe}\\)$`),hc=new RegExp(`^hsl\\(${Oe},${V},${V}\\)$`),dc=new RegExp(`^hsla\\(${Oe},${V},${V},${Oe}\\)$`),So={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lt(Re,F,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Eo,formatHex:Eo,formatHex8:pc,formatHsl:xc,formatRgb:Io,toString:Io});function Eo(){return this.rgb().formatHex()}function pc(){return this.rgb().formatHex8()}function xc(){return Ro(this).formatHsl()}function Io(){return this.rgb().formatRgb()}function F(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sc.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?No(t):r===3?new O(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ut(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ut(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lc.exec(e))?new O(t[1],t[2],t[3],1):(t=uc.exec(e))?new O(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fc.exec(e))?ut(t[1],t[2],t[3],t[4]):(t=mc.exec(e))?ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hc.exec(e))?zo(t[1],t[2]/100,t[3]/100,1):(t=dc.exec(e))?zo(t[1],t[2]/100,t[3]/100,t[4]):So.hasOwnProperty(e)?No(So[e]):e==="transparent"?new O(NaN,NaN,NaN,0):null}function No(e){return new O(e>>16&255,e>>8&255,e&255,1)}function ut(e,t,r,n){return n<=0&&(e=t=r=NaN),new O(e,t,r,n)}function gc(e){return e instanceof Re||(e=F(e)),e?(e=e.rgb(),new O(e.r,e.g,e.b,e.opacity)):new O}function ve(e,t,r,n){return arguments.length===1?gc(e):new O(e,t,r,n??1)}function O(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}lt(O,ve,ur(Re,{brighter(e){return e=e==null?mt:Math.pow(mt,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ze:Math.pow(ze,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new O(se(this.r),se(this.g),se(this.b),ht(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:To,formatHex:To,formatHex8:bc,formatRgb:Do,toString:Do}));function To(){return`#${ce(this.r)}${ce(this.g)}${ce(this.b)}`}function bc(){return`#${ce(this.r)}${ce(this.g)}${ce(this.b)}${ce((isNaN(this.opacity)?1:this.opacity)*255)}`}function Do(){let e=ht(this.opacity);return`${e===1?"rgb(":"rgba("}${se(this.r)}, ${se(this.g)}, ${se(this.b)}${e===1?")":`, ${e})`}`}function ht(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function se(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ce(e){return e=se(e),(e<16?"0":"")+e.toString(16)}function zo(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new q(e,t,r,n)}function Ro(e){if(e instanceof q)return new q(e.h,e.s,e.l,e.opacity);if(e instanceof Re||(e=F(e)),!e)return new q;if(e instanceof q)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=NaN,c=i-o,l=(i+o)/2;return c?(t===i?a=(r-n)/c+(r<n)*6:r===i?a=(n-t)/c+2:a=(t-r)/c+4,c/=l<.5?i+o:2-i-o,a*=60):c=l>0&&l<1?0:a,new q(a,c,l,e.opacity)}function Po(e,t,r,n){return arguments.length===1?Ro(e):new q(e,t,r,n??1)}function q(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}lt(q,Po,ur(Re,{brighter(e){return e=e==null?mt:Math.pow(mt,e),new q(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ze:Math.pow(ze,e),new q(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new O(fr(e>=240?e-240:e+120,o,n),fr(e,o,n),fr(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new q(Oo(this.h),ft(this.s),ft(this.l),ht(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ht(this.opacity);return`${e===1?"hsl(":"hsla("}${Oo(this.h)}, ${ft(this.s)*100}%, ${ft(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Oo(e){return e=(e||0)%360,e<0?e+360:e}function ft(e){return Math.max(0,Math.min(1,e||0))}function fr(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function mr(e,t,r,n,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*r+(1+3*e+3*i-3*a)*n+a*o)/6}function $o(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],i=e[n+1],a=n>0?e[n-1]:2*o-i,c=n<t-1?e[n+2]:2*i-o;return mr((r-n/t)*t,a,o,i,c)}}function Lo(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],i=e[n%t],a=e[(n+1)%t],c=e[(n+2)%t];return mr((r-n/t)*t,o,i,a,c)}}var Pe=e=>()=>e;function yc(e,t){return function(r){return e+r*t}}function _c(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function qo(e){return(e=+e)==1?dt:function(t,r){return r-t?_c(t,r,e):Pe(isNaN(t)?r:t)}}function dt(e,t){var r=t-e;return r?yc(e,r):Pe(isNaN(e)?t:e)}var le=function e(t){var r=qo(t);function n(o,i){var a=r((o=ve(o)).r,(i=ve(i)).r),c=r(o.g,i.g),l=r(o.b,i.b),s=dt(o.opacity,i.opacity);return function(f){return o.r=a(f),o.g=c(f),o.b=l(f),o.opacity=s(f),o+""}}return n.gamma=e,n}(1);function Fo(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),i=new Array(r),a,c;for(a=0;a<r;++a)c=ve(t[a]),n[a]=c.r||0,o[a]=c.g||0,i[a]=c.b||0;return n=e(n),o=e(o),i=e(i),c.opacity=1,function(l){return c.r=n(l),c.g=o(l),c.b=i(l),c+""}}}var kc=Fo($o),vc=Fo(Lo);function Vo(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(i){for(o=0;o<r;++o)n[o]=e[o]*(1-i)+t[o]*i;return n}}function Bo(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xo(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),i=new Array(r),a;for(a=0;a<n;++a)o[a]=ue(e[a],t[a]);for(;a<r;++a)i[a]=t[a];return function(c){for(a=0;a<n;++a)i[a]=o[a](c);return i}}function Wo(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function S(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ho(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=ue(e[o],t[o]):n[o]=t[o];return function(i){for(o in r)n[o]=r[o](i);return n}}var dr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hr=new RegExp(dr.source,"g");function wc(e){return function(){return e}}function Cc(e){return function(t){return e(t)+""}}function $e(e,t){var r=dr.lastIndex=hr.lastIndex=0,n,o,i,a=-1,c=[],l=[];for(e=e+"",t=t+"";(n=dr.exec(e))&&(o=hr.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),c[a]?c[a]+=i:c[++a]=i),(n=n[0])===(o=o[0])?c[a]?c[a]+=o:c[++a]=o:(c[++a]=null,l.push({i:a,x:S(n,o)})),r=hr.lastIndex;return r<t.length&&(i=t.slice(r),c[a]?c[a]+=i:c[++a]=i),c.length<2?l[0]?Cc(l[0].x):wc(t):(t=l.length,function(s){for(var f=0,u;f<t;++f)c[(u=l[f]).i]=u.x(s);return c.join("")})}function ue(e,t){var r=typeof t,n;return t==null||r==="boolean"?Pe(t):(r==="number"?S:r==="string"?(n=F(t))?(t=n,le):$e:t instanceof F?le:t instanceof Date?Wo:Bo(t)?Vo:Array.isArray(t)?Xo:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ho:S)(e,t)}function pr(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var Yo=180/Math.PI,pt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xr(e,t,r,n,o,i){var a,c,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(c=Math.sqrt(r*r+n*n))&&(r/=c,n/=c,l/=c),e*n<t*r&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Yo,skewX:Math.atan(l)*Yo,scaleX:a,scaleY:c}}var xt;function Qo(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pt:xr(t.a,t.b,t.c,t.d,t.e,t.f)}function Uo(e){return e==null?pt:(xt||(xt=document.createElementNS("http://www.w3.org/2000/svg","g")),xt.setAttribute("transform",e),(e=xt.transform.baseVal.consolidate())?(e=e.matrix,xr(e.a,e.b,e.c,e.d,e.e,e.f)):pt)}function Go(e,t,r,n){function o(s){return s.length?s.pop()+" ":""}function i(s,f,u,m,h,d){if(s!==u||f!==m){var g=h.push("translate(",null,t,null,r);d.push({i:g-4,x:S(s,u)},{i:g-2,x:S(f,m)})}else(u||m)&&h.push("translate("+u+t+m+r)}function a(s,f,u,m){s!==f?(s-f>180?f+=360:f-s>180&&(s+=360),m.push({i:u.push(o(u)+"rotate(",null,n)-2,x:S(s,f)})):f&&u.push(o(u)+"rotate("+f+n)}function c(s,f,u,m){s!==f?m.push({i:u.push(o(u)+"skewX(",null,n)-2,x:S(s,f)}):f&&u.push(o(u)+"skewX("+f+n)}function l(s,f,u,m,h,d){if(s!==u||f!==m){var g=h.push(o(h)+"scale(",null,",",null,")");d.push({i:g-4,x:S(s,u)},{i:g-2,x:S(f,m)})}else(u!==1||m!==1)&&h.push(o(h)+"scale("+u+","+m+")")}return function(s,f){var u=[],m=[];return s=e(s),f=e(f),i(s.translateX,s.translateY,f.translateX,f.translateY,u,m),a(s.rotate,f.rotate,u,m),c(s.skewX,f.skewX,u,m),l(s.scaleX,s.scaleY,f.scaleX,f.scaleY,u,m),s=f=null,function(h){for(var d=-1,g=m.length,p;++d<g;)u[(p=m[d]).i]=p.x(h);return u.join("")}}}var gr=Go(Qo,"px, ","px)","deg)"),br=Go(Uo,", ",")",")");var we=0,qe=0,Le=0,Zo=1e3,gt,Fe,bt=0,fe=0,yt=0,Ve=typeof performance=="object"&&performance.now?performance:Date,Jo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xe(){return fe||(Jo(Mc),fe=Ve.now()+yt)}function Mc(){fe=0}function Be(){this._call=this._time=this._next=null}Be.prototype=_t.prototype={constructor:Be,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Xe():+r)+(t==null?0:+t),!this._next&&Fe!==this&&(Fe?Fe._next=this:gt=this,Fe=this),this._call=e,this._time=r,yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,yr())}};function _t(e,t,r){var n=new Be;return n.restart(e,t,r),n}function jo(){Xe(),++we;for(var e=gt,t;e;)(t=fe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--we}function Ko(){fe=(bt=Ve.now())+yt,we=qe=0;try{jo()}finally{we=0,Sc(),fe=0}}function Ac(){var e=Ve.now(),t=e-bt;t>Zo&&(yt-=t,bt=e)}function Sc(){for(var e,t=gt,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:gt=r);Fe=e,yr(n)}function yr(e){if(!we){qe&&(qe=clearTimeout(qe));var t=e-fe;t>24?(e<1/0&&(qe=setTimeout(Ko,e-Ve.now()-yt)),Le&&(Le=clearInterval(Le))):(Le||(bt=Ve.now(),Le=setInterval(Ac,Zo)),we=1,Jo(Ko))}}function kt(e,t,r){var n=new Be;return t=t==null?0:+t,n.restart(o=>{n.stop(),e(o+t)},t,r),n}var Ec=or("start","end","cancel","interrupt"),Ic=[],ri=0,ei=1,wt=2,vt=3,ti=4,Ct=5,We=6;function j(e,t,r,n,o,i){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;Nc(e,r,{name:t,index:n,group:o,on:Ec,tween:Ic,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ri})}function He(e,t){var r=C(e,t);if(r.state>ri)throw new Error("too late; already scheduled");return r}function E(e,t){var r=C(e,t);if(r.state>vt)throw new Error("too late; already running");return r}function C(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Nc(e,t,r){var n=e.__transition,o;n[t]=r,r.timer=_t(i,0,r.time);function i(s){r.state=ei,r.timer.restart(a,r.delay,r.time),r.delay<=s&&a(s-r.delay)}function a(s){var f,u,m,h;if(r.state!==ei)return l();for(f in n)if(h=n[f],h.name===r.name){if(h.state===vt)return kt(a);h.state===ti?(h.state=We,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[f]):+f<t&&(h.state=We,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[f])}if(kt(function(){r.state===vt&&(r.state=ti,r.timer.restart(c,r.delay,r.time),c(s))}),r.state=wt,r.on.call("start",e,e.__data__,r.index,r.group),r.state===wt){for(r.state=vt,o=new Array(m=r.tween.length),f=0,u=-1;f<m;++f)(h=r.tween[f].value.call(e,e.__data__,r.index,r.group))&&(o[++u]=h);o.length=u+1}}function c(s){for(var f=s<r.duration?r.ease.call(null,s/r.duration):(r.timer.restart(l),r.state=Ct,1),u=-1,m=o.length;++u<m;)o[u].call(e,f);r.state===Ct&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=We,r.timer.stop(),delete n[t];for(var s in n)return;delete e.__transition}}function Mt(e,t){var r=e.__transition,n,o,i=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((n=r[a]).name!==t){i=!1;continue}o=n.state>wt&&n.state<Ct,n.state=We,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]}i&&delete e.__transition}}function ni(e){return this.each(function(){Mt(this,e)})}function Tc(e,t){var r,n;return function(){var o=E(this,e),i=o.tween;if(i!==r){n=r=i;for(var a=0,c=n.length;a<c;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}o.tween=n}}function Dc(e,t,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=E(this,e),a=i.tween;if(a!==n){o=(n=a).slice();for(var c={name:t,value:r},l=0,s=o.length;l<s;++l)if(o[l].name===t){o[l]=c;break}l===s&&o.push(c)}i.tween=o}}function oi(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=C(this.node(),r).tween,o=0,i=n.length,a;o<i;++o)if((a=n[o]).name===e)return a.value;return null}return this.each((t==null?Tc:Dc)(r,e,t))}function Ce(e,t,r){var n=e._id;return e.each(function(){var o=E(this,n);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return C(o,n).value[t]}}function At(e,t){var r;return(typeof t=="number"?S:t instanceof F?le:(r=F(t))?(t=r,le):$e)(e,t)}function zc(e){return function(){this.removeAttribute(e)}}function Oc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rc(e,t,r){var n,o=r+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===n?i:i=t(n=a,r)}}function Pc(e,t,r){var n,o=r+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===n?i:i=t(n=a,r)}}function $c(e,t,r){var n,o,i;return function(){var a,c=r(this),l;return c==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=c+"",a===l?null:a===n&&l===o?i:(o=l,i=t(n=a,c)))}}function Lc(e,t,r){var n,o,i;return function(){var a,c=r(this),l;return c==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=c+"",a===l?null:a===n&&l===o?i:(o=l,i=t(n=a,c)))}}function ii(e,t){var r=Y(e),n=r==="transform"?br:At;return this.attrTween(e,typeof t=="function"?(r.local?Lc:$c)(r,n,Ce(this,"attr."+e,t)):t==null?(r.local?Oc:zc)(r):(r.local?Pc:Rc)(r,n,t))}function qc(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Fc(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Vc(e,t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Fc(e,i)),r}return o._value=t,o}function Bc(e,t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&qc(e,i)),r}return o._value=t,o}function ai(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Y(e);return this.tween(r,(n.local?Vc:Bc)(n,t))}function Xc(e,t){return function(){He(this,e).delay=+t.apply(this,arguments)}}function Wc(e,t){return t=+t,function(){He(this,e).delay=t}}function ci(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Xc:Wc)(t,e)):C(this.node(),t).delay}function Hc(e,t){return function(){E(this,e).duration=+t.apply(this,arguments)}}function Yc(e,t){return t=+t,function(){E(this,e).duration=t}}function si(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hc:Yc)(t,e)):C(this.node(),t).duration}function Qc(e,t){if(typeof t!="function")throw new Error;return function(){E(this,e).ease=t}}function li(e){var t=this._id;return arguments.length?this.each(Qc(t,e)):C(this.node(),t).ease}function Uc(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;E(this,e).ease=r}}function ui(e){if(typeof e!="function")throw new Error;return this.each(Uc(this._id,e))}function fi(e){typeof e!="function"&&(e=Te(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=[],l,s=0;s<a;++s)(l=i[s])&&e.call(l,l.__data__,s,i)&&c.push(l);return new D(n,this._parents,this._name,this._id)}function mi(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,o=r.length,i=Math.min(n,o),a=new Array(n),c=0;c<i;++c)for(var l=t[c],s=r[c],f=l.length,u=a[c]=new Array(f),m,h=0;h<f;++h)(m=l[h]||s[h])&&(u[h]=m);for(;c<n;++c)a[c]=t[c];return new D(a,this._parents,this._name,this._id)}function Gc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Kc(e,t,r){var n,o,i=Gc(t)?He:E;return function(){var a=i(this,e),c=a.on;c!==n&&(o=(n=c).copy()).on(t,r),a.on=o}}function hi(e,t){var r=this._id;return arguments.length<2?C(this.node(),r).on.on(e):this.each(Kc(r,e,t))}function Zc(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function di(){return this.on("end.remove",Zc(this._id))}function pi(e){var t=this._name,r=this._id;typeof e!="function"&&(e=ae(e));for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a)for(var c=n[a],l=c.length,s=i[a]=new Array(l),f,u,m=0;m<l;++m)(f=c[m])&&(u=e.call(f,f.__data__,m,c))&&("__data__"in f&&(u.__data__=f.__data__),s[m]=u,j(s[m],t,r,m,s,C(f,r)));return new D(i,this._parents,t,r)}function xi(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ne(e));for(var n=this._groups,o=n.length,i=[],a=[],c=0;c<o;++c)for(var l=n[c],s=l.length,f,u=0;u<s;++u)if(f=l[u]){for(var m=e.call(f,f.__data__,u,l),h,d=C(f,r),g=0,p=m.length;g<p;++g)(h=m[g])&&j(h,t,r,g,m,d);i.push(m),a.push(f)}return new D(i,a,t,r)}var Jc=Q.prototype.constructor;function gi(){return new Jc(this._groups,this._parents)}function jc(e,t){var r,n,o;return function(){var i=J(this,e),a=(this.style.removeProperty(e),J(this,e));return i===a?null:i===r&&a===n?o:o=t(r=i,n=a)}}function bi(e){return function(){this.style.removeProperty(e)}}function es(e,t,r){var n,o=r+"",i;return function(){var a=J(this,e);return a===o?null:a===n?i:i=t(n=a,r)}}function ts(e,t,r){var n,o,i;return function(){var a=J(this,e),c=r(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(e),J(this,e))),a===l?null:a===n&&l===o?i:(o=l,i=t(n=a,c))}}function rs(e,t){var r,n,o,i="style."+t,a="end."+i,c;return function(){var l=E(this,e),s=l.on,f=l.value[i]==null?c||(c=bi(t)):void 0;(s!==r||o!==f)&&(n=(r=s).copy()).on(a,o=f),l.on=n}}function yi(e,t,r){var n=(e+="")=="transform"?gr:At;return t==null?this.styleTween(e,jc(e,n)).on("end.style."+e,bi(e)):typeof t=="function"?this.styleTween(e,ts(e,n,Ce(this,"style."+e,t))).each(rs(this._id,e)):this.styleTween(e,es(e,n,t),r).on("end.style."+e,null)}function ns(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function os(e,t,r){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ns(e,a,r)),n}return i._value=t,i}function _i(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,os(e,t,r??""))}function is(e){return function(){this.textContent=e}}function as(e){return function(){var t=e(this);this.textContent=t??""}}function ki(e){return this.tween("text",typeof e=="function"?as(Ce(this,"text",e)):is(e==null?"":e+""))}function cs(e){return function(t){this.textContent=e.call(this,t)}}function ss(e){var t,r;function n(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&cs(o)),t}return n._value=e,n}function vi(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ss(e))}function wi(){for(var e=this._name,t=this._id,r=St(),n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],c=a.length,l,s=0;s<c;++s)if(l=a[s]){var f=C(l,t);j(l,e,r,s,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new D(n,this._parents,e,r)}function Ci(){var e,t,r=this,n=r._id,o=r.size();return new Promise(function(i,a){var c={value:a},l={value:function(){--o===0&&i()}};r.each(function(){var s=E(this,n),f=s.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(l)),s.on=t}),o===0&&i()})}var ls=0;function D(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Mi(e){return Q().transition(e)}function St(){return++ls}var U=Q.prototype;D.prototype=Mi.prototype={constructor:D,select:pi,selectAll:xi,selectChild:U.selectChild,selectChildren:U.selectChildren,filter:fi,merge:mi,selection:gi,transition:wi,call:U.call,nodes:U.nodes,node:U.node,size:U.size,empty:U.empty,each:U.each,on:hi,attr:ii,attrTween:ai,style:yi,styleTween:_i,text:ki,textTween:vi,remove:di,tween:oi,delay:ci,duration:si,ease:li,easeVarying:ui,end:Ci,[Symbol.iterator]:U[Symbol.iterator]};function Et(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var us={time:null,delay:0,duration:250,ease:Et};function fs(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Ai(e){var t,r;e instanceof D?(t=e._id,e=e._name):(t=St(),(r=us).time=Xe(),e=e==null?null:e+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],c=a.length,l,s=0;s<c;++s)(l=a[s])&&j(l,e,t,s,a,r||fs(l,t));return new D(n,this._parents,e,t)}Q.prototype.interrupt=ni;Q.prototype.transition=Ai;var{abs:dd,max:pd,min:xd}=Math;function Si(e){return[+e[0],+e[1]]}function ms(e){return[Si(e[0]),Si(e[1])]}var gd={name:"x",handles:["w","e"].map(_r),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},bd={name:"y",handles:["n","s"].map(_r),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},yd={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(_r),input:function(e){return e==null?null:ms(e)},output:function(e){return e}};function _r(e){return{type:e}}var kr=Math.PI,vr=2*kr,me=1e-6,hs=vr-me;function Ei(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function ds(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ei;let r=10**t;return function(n){this._+=n[0];for(let o=1,i=n.length;o<i;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var he=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ei:ds(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,i,a){this._append`C${+t},${+r},${+n},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(t,r,n,o,i){if(t=+t,r=+r,n=+n,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,c=this._y1,l=n-t,s=o-r,f=a-t,u=c-r,m=f*f+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>me)if(!(Math.abs(u*l-s*f)>me)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-a,d=o-c,g=l*l+s*s,p=h*h+d*d,b=Math.sqrt(g),y=Math.sqrt(m),_=i*Math.tan((kr-Math.acos((g+m-p)/(2*b*y)))/2),M=_/y,k=_/b;Math.abs(M-1)>me&&this._append`L${t+M*f},${r+M*u}`,this._append`A${i},${i},0,0,${+(u*h>f*d)},${this._x1=t+k*l},${this._y1=r+k*s}`}}arc(t,r,n,o,i,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(o),l=n*Math.sin(o),s=t+c,f=r+l,u=1^a,m=a?o-i:i-o;this._x1===null?this._append`M${s},${f}`:(Math.abs(this._x1-s)>me||Math.abs(this._y1-f)>me)&&this._append`L${s},${f}`,n&&(m<0&&(m=m%vr+vr),m>hs?this._append`A${n},${n},0,1,${u},${t-c},${r-l}A${n},${n},0,1,${u},${this._x1=s},${this._y1=f}`:m>me&&this._append`A${n},${n},0,${+(m>=kr)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function Ii(){return new he}Ii.prototype=he.prototype;function Ni(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function de(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function B(e){return e=de(Math.abs(e)),e?e[1]:NaN}function Ti(e,t){return function(r,n){for(var o=r.length,i=[],a=0,c=e[0],l=0;o>0&&c>0&&(l+c+1>n&&(c=Math.max(1,n-l)),i.push(r.substring(o-=c,o+c)),!((l+=c+1)>n));)c=e[a=(a+1)%e.length];return i.reverse().join(t)}}function Di(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ps=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ee(e){if(!(t=ps.exec(e)))throw new Error("invalid format: "+e);var t;return new It({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ee.prototype=It.prototype;function It(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}It.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zi(e){e:for(var t=e.length,r=1,n=-1,o;r<t;++r)switch(e[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(o+1):e}var wr;function Oi(e,t){var r=de(e,t);if(!r)return e+"";var n=r[0],o=r[1],i=o-(wr=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=n.length;return i===a?n:i>a?n+new Array(i-a+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+de(e,Math.max(0,t+i-1))[0]}function Cr(e,t){var r=de(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var Mr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ni,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Cr(e*100,t),r:Cr,s:Oi,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ar(e){return e}var Ri=Array.prototype.map,Pi=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function $i(e){var t=e.grouping===void 0||e.thousands===void 0?Ar:Ti(Ri.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Ar:Di(Ri.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function s(u){u=ee(u);var m=u.fill,h=u.align,d=u.sign,g=u.symbol,p=u.zero,b=u.width,y=u.comma,_=u.precision,M=u.trim,k=u.type;k==="n"?(y=!0,k="g"):Mr[k]||(_===void 0&&(_=12),M=!0,k="g"),(p||m==="0"&&h==="=")&&(p=!0,m="0",h="=");var G=g==="$"?r:g==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",$=g==="$"?n:/[%p]/.test(k)?a:"",pe=Mr[k],xe=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function K(x){var I=G,A=$,ge,Vr,Qe;if(k==="c")A=pe(x)+A,x="";else{x=+x;var Ue=x<0||1/x<0;if(x=isNaN(x)?l:pe(Math.abs(x),_),M&&(x=zi(x)),Ue&&+x==0&&d!=="+"&&(Ue=!1),I=(Ue?d==="("?d:c:d==="-"||d==="("?"":d)+I,A=(k==="s"?Pi[8+wr/3]:"")+A+(Ue&&d==="("?")":""),xe){for(ge=-1,Vr=x.length;++ge<Vr;)if(Qe=x.charCodeAt(ge),48>Qe||Qe>57){A=(Qe===46?o+x.slice(ge+1):x.slice(ge))+A,x=x.slice(0,ge);break}}}y&&!p&&(x=t(x,1/0));var Ge=I.length+x.length+A.length,X=Ge<b?new Array(b-Ge+1).join(m):"";switch(y&&p&&(x=t(X+x,X.length?b-A.length:1/0),X=""),h){case"<":x=I+x+A+X;break;case"=":x=I+X+x+A;break;case"^":x=X.slice(0,Ge=X.length>>1)+I+x+A+X.slice(Ge);break;default:x=X+I+x+A;break}return i(x)}return K.toString=function(){return u+""},K}function f(u,m){var h=s((u=ee(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(B(m)/3)))*3,g=Math.pow(10,-d),p=Pi[8+d/3];return function(b){return h(g*b)+p}}return{format:s,formatPrefix:f}}var Nt,Tt,Dt;Sr({thousands:",",grouping:[3],currency:["$",""]});function Sr(e){return Nt=$i(e),Tt=Nt.format,Dt=Nt.formatPrefix,Nt}function Er(e){return Math.max(0,-B(Math.abs(e)))}function Ir(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(B(t)/3)))*3-B(Math.abs(e)))}function Nr(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,B(t)-B(e))+1}function Li(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Tr(e){return function(){return e}}function Dr(e){return+e}var qi=[0,1];function Me(e){return e}function zr(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Tr(isNaN(t)?NaN:.5)}function xs(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function gs(e,t,r){var n=e[0],o=e[1],i=t[0],a=t[1];return o<n?(n=zr(o,n),i=r(a,i)):(n=zr(n,o),i=r(i,a)),function(c){return i(n(c))}}function bs(e,t,r){var n=Math.min(e.length,t.length)-1,o=new Array(n),i=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)o[a]=zr(e[a],e[a+1]),i[a]=r(t[a],t[a+1]);return function(c){var l=Zt(e,c,1,n)-1;return i[l](o[l](c))}}function Fi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ys(){var e=qi,t=qi,r=ue,n,o,i,a=Me,c,l,s;function f(){var m=Math.min(e.length,t.length);return a!==Me&&(a=xs(e[0],e[m-1])),c=m>2?bs:gs,l=s=null,u}function u(m){return m==null||isNaN(m=+m)?i:(l||(l=c(e.map(n),t,r)))(n(a(m)))}return u.invert=function(m){return a(o((s||(s=c(t,e.map(n),S)))(m)))},u.domain=function(m){return arguments.length?(e=Array.from(m,Dr),f()):e.slice()},u.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},u.rangeRound=function(m){return t=Array.from(m),r=pr,f()},u.clamp=function(m){return arguments.length?(a=m?!0:Me,f()):a!==Me},u.interpolate=function(m){return arguments.length?(r=m,f()):r},u.unknown=function(m){return arguments.length?(i=m,u):i},function(m,h){return n=m,o=h,f()}}function Or(){return ys()(Me,Me)}function Rr(e,t,r,n){var o=Jt(e,t,r),i;switch(n=ee(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Ir(o,a))&&(n.precision=i),Dt(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Nr(o,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Er(o))&&(n.precision=i-(n.type==="%")*2);break}}return Tt(n)}function _s(e){var t=e.domain;return e.ticks=function(r){var n=t();return rt(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var o=t();return Rr(o[0],o[o.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),o=0,i=n.length-1,a=n[o],c=n[i],l,s,f=10;for(c<a&&(s=a,a=c,c=s,s=o,o=i,i=s);f-- >0;){if(s=Ee(a,c,r),s===l)return n[o]=a,n[i]=c,t(n);if(s>0)a=Math.floor(a/s)*s,c=Math.ceil(c/s)*s;else if(s<0)a=Math.ceil(a*s)/s,c=Math.floor(c*s)/s;else break;l=s}return e},e}function Ae(){var e=Or();return e.copy=function(){return Fi(e,Ae())},Li.apply(e,arguments),_s(e)}function w(e){return function(){return e}}function zt(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new he(t)}var $p=Array.prototype.slice;function Ot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vi(e){this._context=e}Vi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rt(e){return new Vi(e)}function Pt(e){return e[0]}function $t(e){return e[1]}function Ye(e,t){var r=w(!0),n=null,o=Rt,i=null,a=zt(c);e=typeof e=="function"?e:e===void 0?Pt:w(e),t=typeof t=="function"?t:t===void 0?$t:w(t);function c(l){var s,f=(l=Ot(l)).length,u,m=!1,h;for(n==null&&(i=o(h=a())),s=0;s<=f;++s)!(s<f&&r(u=l[s],s,l))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(u,s,l),+t(u,s,l));if(h)return i=null,h+""||null}return c.x=function(l){return arguments.length?(e=typeof l=="function"?l:w(+l),c):e},c.y=function(l){return arguments.length?(t=typeof l=="function"?l:w(+l),c):t},c.defined=function(l){return arguments.length?(r=typeof l=="function"?l:w(!!l),c):r},c.curve=function(l){return arguments.length?(o=l,n!=null&&(i=o(n)),c):o},c.context=function(l){return arguments.length?(l==null?n=i=null:i=o(n=l),c):n},c}function Pr(e,t,r){var n=null,o=w(!0),i=null,a=Rt,c=null,l=zt(s);e=typeof e=="function"?e:e===void 0?Pt:w(+e),t=typeof t=="function"?t:t===void 0?w(0):w(+t),r=typeof r=="function"?r:r===void 0?$t:w(+r);function s(u){var m,h,d,g=(u=Ot(u)).length,p,b=!1,y,_=new Array(g),M=new Array(g);for(i==null&&(c=a(y=l())),m=0;m<=g;++m){if(!(m<g&&o(p=u[m],m,u))===b)if(b=!b)h=m,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),d=m-1;d>=h;--d)c.point(_[d],M[d]);c.lineEnd(),c.areaEnd()}b&&(_[m]=+e(p,m,u),M[m]=+t(p,m,u),c.point(n?+n(p,m,u):_[m],r?+r(p,m,u):M[m]))}if(y)return c=null,y+""||null}function f(){return Ye().defined(o).curve(a).context(i)}return s.x=function(u){return arguments.length?(e=typeof u=="function"?u:w(+u),n=null,s):e},s.x0=function(u){return arguments.length?(e=typeof u=="function"?u:w(+u),s):e},s.x1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:w(+u),s):n},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:w(+u),r=null,s):t},s.y0=function(u){return arguments.length?(t=typeof u=="function"?u:w(+u),s):t},s.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:w(+u),s):r},s.lineX0=s.lineY0=function(){return f().x(e).y(t)},s.lineY1=function(){return f().x(e).y(r)},s.lineX1=function(){return f().x(n).y(t)},s.defined=function(u){return arguments.length?(o=typeof u=="function"?u:w(!!u),s):o},s.curve=function(u){return arguments.length?(a=u,i!=null&&(c=a(i)),s):a},s.context=function(u){return arguments.length?(u==null?i=c=null:c=a(i=u),s):i},s}function te(e,t,r){this.k=e,this.x=t,this.y=r}te.prototype={constructor:te,scale:function(e){return e===1?this:new te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $r=new te(1,0,0);Lr.prototype=te.prototype;function Lr(e){for(;!e.__zoom;)if(!(e=e.parentNode))return $r;return e.__zoom}function Bi(e,t){let r=function*(){let n=0;for(let a=0;a<e.length;a++)if(e[a].location!=e[n].location){let c=t(n),l=t(a);yield{left:c,middle:c+(l-c)/2,name:e[n].location.name},n=a}let o=t(n),i=t(e.length-1);yield{left:o,middle:o+(i-o)/2,name:e[n].location.name}}();return Array.from(r)}function Xi(e){let t=[],r=e[0].hour.length;for(let n=0;n<r;n++){let o=e.map(i=>i.hour[n].temperature);t.push({min:Math.min(...o),max:Math.max(...o),avg:o.reduce((i,a)=>i+a)/o.length})}return t}function Wi(e,t,r){let n=function*(){let o=0,i=e.hour[0].isDay;for(let a=0;a<e.hour.length;a++)if(e.hour[a].isDay!=i){let c=o;o=a;let l=t(c),s=t(o);yield{start:l,width:s-l,color:i?"yellow":"gray"},i=e.hour[a].isDay}}();return Array.from(n)}var vs=["chart"],Lt=class e{svg=jr.required("chart");query=re.required();range=re.required();data=re.required();showNight=re(!1);showMinMax=re(!1);width=re(1280);label=R(()=>{let t="temperatures during visit";return this.showNight()||(t=`day time ${t}`),t});dayData=R(()=>this.data().map(t=>({year:t.year,hour:t.hour.filter(r=>this.showNight()||r.sunshineDuration>0)})));temperatures=R(()=>({min:0,max:30}));margin=R(()=>({top:40,bottom:40,left:40,right:40}));size=R(()=>({width:this.width(),height:this.width()*9/16}));bottomAxis;clientArea=R(()=>{let t=this.size(),r=this.margin(),n=r.top,o=r.left,i=t.height-r.bottom,a=t.width-r.right;return{left:o,top:n,right:a,bottom:i,height:i-n,width:a-o}});xAxis=R(()=>{let t=this.dayData()[0].hour.length,{left:r,right:n}=this.clientArea();return Ae().range([r,n]).domain([0,t-1])});temperatureAxis=R(()=>{let{min:t,max:r}=this.temperatures(),{top:n,bottom:o}=this.clientArea();return Ae().range([n,o]).domain([r,t])});constructor(){bn({write:this.updateChart.bind(this)})}updateChart(){let t=lr(this.svg().nativeElement);t.selectChildren().remove();let{top:r,left:n,bottom:o,right:i,height:a,width:c}=this.clientArea(),l=this.xAxis(),s=this.temperatureAxis(),f=this.dayData(),u=t.append("g").attr("class","swimlane").selectAll().data(Bi(f[0].hour,l));u.join("line").attr("x1",p=>p.left).attr("x2",p=>p.left).attr("y1",r).attr("y2",o).attr("stroke","var(--mat-sys-on-background)").attr("stroke-dasharray","1 4"),u.join("text").attr("x",p=>p.middle).attr("y",r).text(p=>p.name),this.showNight()&&t.append("g").attr("class","daylight").selectAll().data(Wi(f[0],l,this.range())).join("rect").attr("x",b=>b.start).attr("width",b=>b.width).attr("y",r).attr("height",a).attr("fill",b=>b.color).attr("opacity",.08);let m=rr(l).tickFormat(p=>this.dayData()[0].hour[p].time.toPlainMonthDay().toString());this.bottomAxis=t.append("g").attr("transform",`translate(0, ${s(0)})`).call(m),t.append("g").attr("transform",`translate(${n},0)`).call(nr(s)),t.append("text").attr("x",0).attr("y",25).attr("text-anchor","start").style("font-size","0.75em").text("Temperature in \xB0C");let h=Xi(f),d=t.append("g").attr("class","temperature"),g=Ye().x((p,b)=>l(b)).y(p=>s(p.avg));if(d.append("path").attr("d",g(h)).attr("stroke","var(--mat-sys-on-background)").attr("fill","none"),this.showMinMax()){let p=Pr().x0((b,y)=>l(y)).x1((b,y)=>l(y)).y0(b=>s(b.min)).y1(b=>s(b.max));d.append("path").attr("d",p(h)).attr("fill","var(--mat-sys-tertiary)").attr("opacity",.08)}}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=_e({type:e,selectors:[["app-weather-chart"]],viewQuery:function(r,n){r&1&&fn(n.svg,vs,5),r&2&&mn()},inputs:{query:[1,"query"],range:[1,"range"],data:[1,"data"],showNight:[1,"showNight"],showMinMax:[1,"showMinMax"],width:[1,"width"]},decls:4,vars:3,consts:[["chart",""]],template:function(r,n){r&1&&(T(0,"h1"),H(1),z(),Ke(),W(2,"svg",null,0)),r&2&&(L(),dn(n.label()),L(),Se("width",n.size().width)("height",n.size().height))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:150px;width:100%;align-items:center}[_nghost-%COMP%]  .swimlane text{text-anchor:middle}[_nghost-%COMP%]  text{fill:var(--mat-sys-on-background)}h1[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0})};var ws=["input"],Cs=["label"],Ms=["*"],As=new Yr("mat-checkbox-default-options",{providedIn:"root",factory:Qi});function Qi(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var N=function(e){return e[e.Init=0]="Init",e[e.Checked=1]="Checked",e[e.Unchecked=2]="Unchecked",e[e.Indeterminate=3]="Indeterminate",e}(N||{}),Ss={provide:Mn,useExisting:Wr(()=>qt),multi:!0},qr=class{source;checked},Yi=Qi(),qt=(()=>{class e{_elementRef=P(Ze);_changeDetectorRef=P(xn);_ngZone=P(Kr);_animationMode=P(Zr,{optional:!0});_options=P(As,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(r){let n=new qr;return n.source=this,n.checked=r,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new Ft;indeterminateChange=new Ft;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=N.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){P(_n).load(vn);let r=P(new Gr("tabindex"),{optional:!0});this._options=this._options||Yi,this.color=this._options.color||Yi.color,this.tabIndex=r==null?0:parseInt(r)||0,this.id=this._uniqueId=P(kn).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(r){r.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(r){r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(r){r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate}set indeterminate(r){let n=r!=this._indeterminate;this._indeterminate=r,n&&(this._indeterminate?this._transitionCheckState(N.Indeterminate):this._transitionCheckState(this.checked?N.Checked:N.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_indeterminate=!1;_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(r){this.checked=!!r}registerOnChange(r){this._controlValueAccessorChangeFn=r}registerOnTouched(r){this._onTouched=r}setDisabledState(r){this.disabled=r}validate(r){return this.required&&r.value!==!0?{required:!0}:null}registerOnValidatorChange(r){this._validatorChangeFn=r}_transitionCheckState(r){let n=this._currentCheckState,o=this._getAnimationTargetElement();if(!(n===r||!o)&&(this._currentAnimationClass&&o.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,r),this._currentCheckState=r,this._currentAnimationClass.length>0)){o.classList.add(this._currentAnimationClass);let i=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.classList.remove(i)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let r=this._options?.clickAction;!this.disabled&&r!=="noop"?(this.indeterminate&&r!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?N.Checked:N.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&r==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(r){r.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(r,n){if(this._animationMode==="NoopAnimations")return"";switch(r){case N.Init:if(n===N.Checked)return this._animationClasses.uncheckedToChecked;if(n==N.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case N.Unchecked:return n===N.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case N.Checked:return n===N.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case N.Indeterminate:return n===N.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(r){let n=this._inputElement;n&&(n.nativeElement.indeterminate=r)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(r){r.target&&this._labelElement.nativeElement.contains(r.target)&&r.stopPropagation()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_e({type:e,selectors:[["mat-checkbox"]],viewQuery:function(n,o){if(n&1&&(Bt(ws,5),Bt(Cs,5)),n&2){let i;Xt(i=Wt())&&(o._inputElement=i.first),Xt(i=Wt())&&(o._labelElement=i.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(n,o){n&2&&(cn("id",o.id),Se("tabindex",null)("aria-label",null)("aria-labelledby",null),nn(o.color?"mat-"+o.color:"mat-accent"),Vt("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mdc-checkbox--disabled",o.disabled)("mat-mdc-checkbox-disabled",o.disabled)("mat-mdc-checkbox-checked",o.checked)("mat-mdc-checkbox-disabled-interactive",o.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",Z],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",Z],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",Z],tabIndex:[2,"tabIndex","tabIndex",r=>r==null?void 0:gn(r)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Z],checked:[2,"checked","checked",Z],disabled:[2,"disabled","disabled",Z],indeterminate:[2,"indeterminate","indeterminate",Z]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[pn([Ss,{provide:An,useExisting:e,multi:!0}]),tn,Qr],ngContentSelectors:Ms,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(n,o){if(n&1){let i=an();ln(),T(0,"div",3),je("click",function(c){return be(i),ye(o._preventBubblingFromLabel(c))}),T(1,"div",4,0)(3,"div",5),je("click",function(){return be(i),ye(o._onTouchTargetClick())}),z(),T(4,"input",6,1),je("blur",function(){return be(i),ye(o._onBlur())})("click",function(){return be(i),ye(o._onInputClick())})("change",function(c){return be(i),ye(o._onInteractionEvent(c))}),z(),W(6,"div",7),T(7,"div",8),Ke(),T(8,"svg",9),W(9,"path",10),z(),Ur(),W(10,"div",11),z(),W(11,"div",12),z(),T(12,"label",13,2),un(14),z()()}if(n&2){let i=hn(2);ne("labelPosition",o.labelPosition),L(4),Vt("mdc-checkbox--selected",o.checked),ne("checked",o.checked)("indeterminate",o.indeterminate)("disabled",o.disabled&&!o.disabledInteractive)("id",o.inputId)("required",o.required)("tabIndex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex),Se("aria-label",o.ariaLabel||null)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby)("aria-checked",o.indeterminate?"mixed":null)("aria-controls",o.ariaControls)("aria-disabled",o.disabled&&o.disabledInteractive?!0:null)("aria-expanded",o.ariaExpanded)("aria-owns",o.ariaOwns)("name",o.name)("value",o.value),L(7),ne("matRippleTrigger",i)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0),L(),ne("for",o.inputId)}},dependencies:[wn,Cn],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mdc-checkbox--disabled{opacity:.5}}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return e})();var Ui=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=en({type:e});static \u0275inj=Hr({imports:[qt,Ut,Ut]})}return e})();function Is(e,t){if(e&1&&(W(0,"app-weather-chart",2),T(1,"div",3),H(2," Data by "),T(3,"a",4),H(4,"Open-Meteo"),z(),H(5," under "),T(6,"a",5),H(7,"CC BY 4.0"),z()()),e&2){let r=sn();ne("range",r.range())("query",r.queries())("data",t)("width",r.width())("showNight",r.showNight())("showMinMax",r.showMinMax())}}var Ns="https://archive-api.open-meteo.com/v1/archive",Fr=class e{width=Je(0);showNight=Je(!1);showMinMax=Je(!1);constructor(){let t=P(Ze);Jr({read:()=>this.width.set(t.nativeElement.clientWidth)})}queries=P(Nn).viewState;range=R(()=>Gi(this.queries()));params=R(()=>Ts(this.queries()),{equal:(t,r)=>t.toString()===r.toString()});weatherData=yn({request:()=>this.params(),loader:async({request:t,abortSignal:r})=>{let n=t.map(i=>{let a=new URL(Ns);return a.search=i.toString(),a});return await Promise.all(n.map(async i=>(await fetch(i,{signal:r})).json()))}});data=R(()=>{let t=this.weatherData.value();return t==null?null:Tn(this.queries(),t)});static \u0275fac=function(r){return new(r||e)};static \u0275cmp=_e({type:e,selectors:[["app-weather-view"]],decls:6,vars:3,consts:[[1,"chart-sidebar"],[3,"ngModelChange","ngModel"],[3,"range","query","data","width","showNight","showMinMax"],[1,"attribution"],["href","https://open-meteo.com/"],["href","https://creativecommons.org/licenses/by/4.0/"]],template:function(r,n){if(r&1&&(T(0,"div",0)(1,"mat-checkbox",1),Qt("ngModelChange",function(i){return Yt(n.showMinMax,i)||(n.showMinMax=i),i}),H(2,"Show Min/Max"),z(),T(3,"mat-checkbox",1),Qt("ngModelChange",function(i){return Yt(n.showNight,i)||(n.showNight=i),i}),H(4,"Show Nights"),z()(),rn(5,Is,8,6)),r&2){let o;L(),Ht("ngModel",n.showMinMax),L(2),Ht("ngModel",n.showNight),L(2),on((o=n.data())?5:-1,o)}},dependencies:[Ui,qt,In,Sn,En,Lt],styles:["[_nghost-%COMP%]{display:block;overflow:hidden;width:100%}.chart-sidebar[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container);color:var(--mat-sys-on-surface);height:66px;display:flex;align-items:center;padding-inline:12px}.chart-sidebar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-inline-start:auto}.attribution[_ngcontent-%COMP%]{font-size:.7em;color:oklch(from #e0e3e2 calc(l*.8) c h);text-align:end;padding-inline:12px}"],changeDetection:0})};function Ts(e){let{start:t,end:r}=Gi(e),n={latitude:e.map(i=>i.location.latitude.toFixed(4)).join(","),longitude:e.map(i=>i.location.longitude.toFixed(4)).join(","),hourly:["temperature_2m","precipitation","cloud_cover","sunshine_duration","is_day"].join(","),format:"json"},o=oe.Now.plainDateISO().year;return t=t.with({year:o},{overflow:"constrain"}),r=r.with({year:o},{overflow:"constrain"}),Array.from({length:5},(i,a)=>new URLSearchParams(Xr(Br({},n),{start_date:t.subtract({years:a+1}).toString(),end_date:r.subtract({years:a+1}).toString()})))}function Gi(e){let t=e[0].dates.start,r=e[0].dates.end;for(let n of e)oe.PlainDate.compare(t,n.dates.start)>0&&(t=n.dates.start),oe.PlainDate.compare(r,n.dates.end)<0&&(r=n.dates.end);return{start:t,end:r}}export{Fr as default};
